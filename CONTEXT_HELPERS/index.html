<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Comprehensive documentation for Go REST API Boilerplate ‚Äî setup guides, architecture overview, API references, and deployment instructions"><meta name=author content=vahiiiid><link href=https://vahiiiid.github.io/go-rest-api-docs/CONTEXT_HELPERS/ rel=canonical><link href=../PROJECT_SUMMARY/ rel=prev><link href=../MIGRATIONS_GUIDE/ rel=next><link rel=icon href=../images/favicon.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.0"><title>Context Helpers - Go REST API Boilerplate (GRAB) - Documentation</title><link rel=stylesheet href=../assets/stylesheets/main.618322db.min.css><link rel=stylesheet href=../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../stylesheets/extra.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#context-helpers class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="Go REST API Boilerplate (GRAB) - Documentation" class="md-header__button md-logo" aria-label="Go REST API Boilerplate (GRAB) - Documentation" data-md-component=logo> <img src=../images/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Go REST API Boilerplate (GRAB) - Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Context Helpers </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/vahiiiid/go-rest-api-docs title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> vahiiiid/go-rest-api-docs </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../SETUP/ class=md-tabs__link> Getting Started </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../DEVELOPMENT_GUIDE/ class=md-tabs__link> Development </a> </li> <li class=md-tabs__item> <a href=../TODO_EXAMPLE/ class=md-tabs__link> Example </a> </li> <li class=md-tabs__item> <a href=../TESTING/ class=md-tabs__link> Testing </a> </li> <li class=md-tabs__item> <a href=../AUTHENTICATION/ class=md-tabs__link> API Features </a> </li> <li class=md-tabs__item> <a href=../DOCKER/ class=md-tabs__link> Infrastructure </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="Go REST API Boilerplate (GRAB) - Documentation" class="md-nav__button md-logo" aria-label="Go REST API Boilerplate (GRAB) - Documentation" data-md-component=logo> <img src=../images/logo.svg alt=logo> </a> Go REST API Boilerplate (GRAB) - Documentation </label> <div class=md-nav__source> <a href=https://github.com/vahiiiid/go-rest-api-docs title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> vahiiiid/go-rest-api-docs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../SETUP/ class=md-nav__link> <span class=md-ellipsis> Setup Guide </span> </a> </li> <li class=md-nav__item> <a href=../CONFIGURATION/ class=md-nav__link> <span class=md-ellipsis> Configuration Guide </span> </a> </li> <li class=md-nav__item> <a href=../SECURITY_GUIDE/ class=md-nav__link> <span class=md-ellipsis> Security Guide </span> </a> </li> <li class=md-nav__item> <a href=../QUICK_REFERENCE/ class=md-nav__link> <span class=md-ellipsis> Quick Reference </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Development </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../DEVELOPMENT_GUIDE/ class=md-nav__link> <span class=md-ellipsis> Development Guide </span> </a> </li> <li class=md-nav__item> <a href=../PROJECT_SUMMARY/ class=md-nav__link> <span class=md-ellipsis> Project Summary </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Context Helpers </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Context Helpers </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> üéØ Overview </span> </a> <nav class=md-nav aria-label="üéØ Overview"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#key-benefits class=md-nav__link> <span class=md-ellipsis> Key Benefits </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#available-functions class=md-nav__link> <span class=md-ellipsis> üì¶ Available Functions </span> </a> <nav class=md-nav aria-label="üì¶ Available Functions"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#user-information-extraction class=md-nav__link> <span class=md-ellipsis> User Information Extraction </span> </a> </li> <li class=md-nav__item> <a href=#authentication-authorization class=md-nav__link> <span class=md-ellipsis> Authentication &amp; Authorization </span> </a> </li> <li class=md-nav__item> <a href=#role-based-access-control class=md-nav__link> <span class=md-ellipsis> Role-Based Access Control </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#code-transformation class=md-nav__link> <span class=md-ellipsis> üîÑ Code Transformation </span> </a> <nav class=md-nav aria-label="üîÑ Code Transformation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#before-repetitive-boilerplate class=md-nav__link> <span class=md-ellipsis> Before: Repetitive Boilerplate </span> </a> </li> <li class=md-nav__item> <a href=#after-clean-type-safe class=md-nav__link> <span class=md-ellipsis> After: Clean &amp; Type-Safe </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#impact-metrics class=md-nav__link> <span class=md-ellipsis> üìä Impact Metrics </span> </a> </li> <li class=md-nav__item> <a href=#usage-examples class=md-nav__link> <span class=md-ellipsis> üõ†Ô∏è Usage Examples </span> </a> <nav class=md-nav aria-label="üõ†Ô∏è Usage Examples"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#basic-authentication-check class=md-nav__link> <span class=md-ellipsis> Basic Authentication Check </span> </a> </li> <li class=md-nav__item> <a href=#resource-ownership-validation class=md-nav__link> <span class=md-ellipsis> Resource Ownership Validation </span> </a> </li> <li class=md-nav__item> <a href=#user-information-display class=md-nav__link> <span class=md-ellipsis> User Information Display </span> </a> </li> <li class=md-nav__item> <a href=#error-handling-with-must-functions class=md-nav__link> <span class=md-ellipsis> Error Handling with Must Functions </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#testing class=md-nav__link> <span class=md-ellipsis> üß™ Testing </span> </a> <nav class=md-nav aria-label="üß™ Testing"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#running-tests class=md-nav__link> <span class=md-ellipsis> Running Tests </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#integration class=md-nav__link> <span class=md-ellipsis> üîß Integration </span> </a> <nav class=md-nav aria-label="üîß Integration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#middleware-setup class=md-nav__link> <span class=md-ellipsis> Middleware Setup </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#best-practices class=md-nav__link> <span class=md-ellipsis> üöÄ Best Practices </span> </a> <nav class=md-nav aria-label="üöÄ Best Practices"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-use-appropriate-functions class=md-nav__link> <span class=md-ellipsis> 1. Use Appropriate Functions </span> </a> </li> <li class=md-nav__item> <a href=#2-consistent-error-handling class=md-nav__link> <span class=md-ellipsis> 2. Consistent Error Handling </span> </a> </li> <li class=md-nav__item> <a href=#3-combine-with-validation class=md-nav__link> <span class=md-ellipsis> 3. Combine with Validation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#future-enhancements class=md-nav__link> <span class=md-ellipsis> üîÆ Future Enhancements </span> </a> </li> <li class=md-nav__item> <a href=#related-documentation class=md-nav__link> <span class=md-ellipsis> üìö Related Documentation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../MIGRATIONS_GUIDE/ class=md-nav__link> <span class=md-ellipsis> Migrations Guide </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../TODO_EXAMPLE/ class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> <li class=md-nav__item> <a href=../TESTING/ class=md-nav__link> <span class=md-ellipsis> Testing </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> API Features </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> API Features </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../AUTHENTICATION/ class=md-nav__link> <span class=md-ellipsis> Authentication & JWT </span> </a> </li> <li class=md-nav__item> <a href=../RBAC/ class=md-nav__link> <span class=md-ellipsis> Role-Based Access Control </span> </a> </li> <li class=md-nav__item> <a href=../API_RESPONSE_FORMAT/ class=md-nav__link> <span class=md-ellipsis> API Response Format </span> </a> </li> <li class=md-nav__item> <a href=../ERROR_HANDLING/ class=md-nav__link> <span class=md-ellipsis> Error Handling </span> </a> </li> <li class=md-nav__item> <a href=../RATE_LIMITING/ class=md-nav__link> <span class=md-ellipsis> Rate Limiting </span> </a> </li> <li class=md-nav__item> <a href=../LOGGING/ class=md-nav__link> <span class=md-ellipsis> Logging & Monitoring </span> </a> </li> <li class=md-nav__item> <a href=../HEALTH_CHECKS/ class=md-nav__link> <span class=md-ellipsis> Health Checks </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Infrastructure </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../DOCKER/ class=md-nav__link> <span class=md-ellipsis> Docker Guide </span> </a> </li> <li class=md-nav__item> <a href=../GRACEFUL_SHUTDOWN/ class=md-nav__link> <span class=md-ellipsis> Graceful Shutdown </span> </a> </li> <li class=md-nav__item> <a href=../SWAGGER/ class=md-nav__link> <span class=md-ellipsis> Swagger API Docs </span> </a> </li> <li class=md-nav__item> <a href=../DOCS_SETUP/ class=md-nav__link> <span class=md-ellipsis> Documentation Setup </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/vahiiiid/go-rest-api-docs/edit/main/docs/CONTEXT_HELPERS.md title="Edit this page" class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <h1 id=context-helpers>Context Helpers<a class=headerlink href=#context-helpers title="Permanent link">&para;</a></h1> <p>The Context Helpers package provides type-safe, reusable functions for extracting user authentication information from Gin request contexts. This eliminates repetitive boilerplate code in handlers and provides a clean, maintainable approach to user authentication and authorization.</p> <h2 id=overview>üéØ Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>The Context Helpers package (<code>internal/contextutil</code>) offers a comprehensive set of functions that simplify user authentication and authorization in your handlers. Instead of manually extracting and validating JWT claims in every protected endpoint, you can use these helper functions for clean, readable, and maintainable code.</p> <h3 id=key-benefits>Key Benefits<a class=headerlink href=#key-benefits title="Permanent link">&para;</a></h3> <ul> <li><strong>üîÑ DRY Principle</strong>: Eliminates code duplication across handlers</li> <li><strong>üõ°Ô∏è Type Safety</strong>: Built-in type assertions with proper error handling </li> <li><strong>üß™ Testability</strong>: Comprehensive test coverage ensures reliability</li> <li><strong>üìñ Readability</strong>: Clean, self-documenting authentication code</li> <li><strong>‚ö° Performance</strong>: Optimized context extraction with minimal overhead</li> </ul> <h2 id=available-functions>üì¶ Available Functions<a class=headerlink href=#available-functions title="Permanent link">&para;</a></h2> <h3 id=user-information-extraction>User Information Extraction<a class=headerlink href=#user-information-extraction title="Permanent link">&para;</a></h3> <h4 id=getuserc-gincontext-authclaims><code>GetUser(c *gin.Context) *auth.Claims</code><a class=headerlink href=#getuserc-gincontext-authclaims title="Permanent link">&para;</a></h4> <p>Retrieves the complete authenticated user claims from context.</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nx>claims</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>GetUser</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=k>if</span><span class=w> </span><span class=nx>claims</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>    </span><span class=c1>// User is authenticated</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=w>    </span><span class=nx>fmt</span><span class=p>.</span><span class=nx>Printf</span><span class=p>(</span><span class=s>&quot;User ID: %d, Email: %s\n&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>claims</span><span class=p>.</span><span class=nx>UserID</span><span class=p>,</span><span class=w> </span><span class=nx>claims</span><span class=p>.</span><span class=nx>Email</span><span class=p>)</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=p>}</span>
</span></code></pre></div> <h4 id=mustgetuserc-gincontext-authclaims-error><code>MustGetUser(c *gin.Context) (*auth.Claims, error)</code><a class=headerlink href=#mustgetuserc-gincontext-authclaims-error title="Permanent link">&para;</a></h4> <p>Retrieves user claims or returns an error if not found.</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=nx>claims</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>MustGetUser</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>    </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusUnauthorized</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Unauthorized&quot;</span><span class=p>})</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>    </span><span class=k>return</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=p>}</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=c1>// Use claims safely</span>
</span></code></pre></div> <h4 id=getuseridc-gincontext-uint><code>GetUserID(c *gin.Context) uint</code><a class=headerlink href=#getuseridc-gincontext-uint title="Permanent link">&para;</a></h4> <p>Extracts the authenticated user's ID from context. Returns <code>0</code> if not found.</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=nx>userID</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>GetUserID</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=k>if</span><span class=w> </span><span class=nx>userID</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>    </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusUnauthorized</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Unauthorized&quot;</span><span class=p>})</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>    </span><span class=k>return</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=p>}</span>
</span></code></pre></div> <h4 id=mustgetuseridc-gincontext-uint-error><code>MustGetUserID(c *gin.Context) (uint, error)</code><a class=headerlink href=#mustgetuseridc-gincontext-uint-error title="Permanent link">&para;</a></h4> <p>Gets user ID with error handling.</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=nx>userID</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>MustGetUserID</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>    </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusUnauthorized</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Unauthorized&quot;</span><span class=p>})</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>    </span><span class=k>return</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=p>}</span>
</span></code></pre></div> <h4 id=getemailc-gincontext-string><code>GetEmail(c *gin.Context) string</code><a class=headerlink href=#getemailc-gincontext-string title="Permanent link">&para;</a></h4> <p>Extracts the authenticated user's email address.</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=nx>email</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>GetEmail</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=k>if</span><span class=w> </span><span class=nx>email</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>    </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusUnauthorized</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Unauthorized&quot;</span><span class=p>})</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>    </span><span class=k>return</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=p>}</span>
</span></code></pre></div> <h4 id=getusernamec-gincontext-string><code>GetUserName(c *gin.Context) string</code><a class=headerlink href=#getusernamec-gincontext-string title="Permanent link">&para;</a></h4> <p>Extracts the authenticated user's name.</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=nx>userName</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>GetUserName</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=nx>fmt</span><span class=p>.</span><span class=nx>Printf</span><span class=p>(</span><span class=s>&quot;Welcome, %s!\n&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>userName</span><span class=p>)</span>
</span></code></pre></div> <h3 id=authentication-authorization>Authentication &amp; Authorization<a class=headerlink href=#authentication-authorization title="Permanent link">&para;</a></h3> <h4 id=isauthenticatedc-gincontext-bool><code>IsAuthenticated(c *gin.Context) bool</code><a class=headerlink href=#isauthenticatedc-gincontext-bool title="Permanent link">&para;</a></h4> <p>Checks if the request has valid authentication.</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=k>if</span><span class=w> </span><span class=p>!</span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>IsAuthenticated</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>    </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusUnauthorized</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Unauthorized&quot;</span><span class=p>})</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>    </span><span class=k>return</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=p>}</span>
</span></code></pre></div> <h4 id=canaccessuserc-gincontext-targetuserid-uint-bool><code>CanAccessUser(c *gin.Context, targetUserID uint) bool</code><a class=headerlink href=#canaccessuserc-gincontext-targetuserid-uint-bool title="Permanent link">&para;</a></h4> <p>Checks if the authenticated user can access the target user's resources (ownership-based access control).</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=k>if</span><span class=w> </span><span class=p>!</span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>CanAccessUser</span><span class=p>(</span><span class=nx>c</span><span class=p>,</span><span class=w> </span><span class=nb>uint</span><span class=p>(</span><span class=nx>id</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=w>    </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusForbidden</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Forbidden&quot;</span><span class=p>})</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=w>    </span><span class=k>return</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=p>}</span>
</span></code></pre></div> <h3 id=role-based-access-control>Role-Based Access Control<a class=headerlink href=#role-based-access-control title="Permanent link">&para;</a></h3> <h4 id=hasrolec-gincontext-role-string-bool><code>HasRole(c *gin.Context, role string) bool</code><a class=headerlink href=#hasrolec-gincontext-role-string-bool title="Permanent link">&para;</a></h4> <p>Checks if the authenticated user has a specific role.</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=k>if</span><span class=w> </span><span class=p>!</span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>HasRole</span><span class=p>(</span><span class=nx>c</span><span class=p>,</span><span class=w> </span><span class=s>&quot;admin&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=w>    </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusForbidden</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Insufficient permissions&quot;</span><span class=p>})</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=w>    </span><span class=k>return</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=p>}</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=c1>// Check for custom roles</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=k>if</span><span class=w> </span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>HasRole</span><span class=p>(</span><span class=nx>c</span><span class=p>,</span><span class=w> </span><span class=s>&quot;moderator&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=w>    </span><span class=c1>// Moderator-specific logic</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a><span class=p>}</span>
</span></code></pre></div> <h4 id=isadminc-gincontext-bool><code>IsAdmin(c *gin.Context) bool</code><a class=headerlink href=#isadminc-gincontext-bool title="Permanent link">&para;</a></h4> <p>Convenience function to check if the user has admin role.</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=k>if</span><span class=w> </span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>IsAdmin</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=w>    </span><span class=c1>// Admin-specific functionality</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=w>    </span><span class=nx>adminData</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>fetchAdminDashboard</span><span class=p>()</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=w>    </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusOK</span><span class=p>,</span><span class=w> </span><span class=nx>adminData</span><span class=p>)</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=w>    </span><span class=k>return</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=p>}</span>
</span></code></pre></div> <h4 id=getrolesc-gincontext-string><code>GetRoles(c *gin.Context) []string</code><a class=headerlink href=#getrolesc-gincontext-string title="Permanent link">&para;</a></h4> <p>Retrieves all roles assigned to the authenticated user.</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=nx>roles</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>GetRoles</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=c1>// Returns: [&quot;user&quot;], [&quot;user&quot;, &quot;admin&quot;], or []</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=c1>// Example: Display user roles</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusOK</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=w>    </span><span class=s>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>GetUserID</span><span class=p>(</span><span class=nx>c</span><span class=p>),</span>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=w>    </span><span class=s>&quot;roles&quot;</span><span class=p>:</span><span class=w>   </span><span class=nx>roles</span><span class=p>,</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=p>})</span>
</span></code></pre></div> <p><strong>Integration with Middleware:</strong></p> <p>The RBAC context helpers work seamlessly with the authorization middleware:</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=c1>// In router.go - protecting admin endpoints</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=nx>adminGroup</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>v1</span><span class=p>.</span><span class=nx>Group</span><span class=p>(</span><span class=s>&quot;/admin&quot;</span><span class=p>)</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=nx>adminGroup</span><span class=p>.</span><span class=nx>Use</span><span class=p>(</span><span class=nx>auth</span><span class=p>.</span><span class=nx>AuthMiddleware</span><span class=p>(</span><span class=nx>authService</span><span class=p>),</span><span class=w> </span><span class=nx>middleware</span><span class=p>.</span><span class=nx>RequireAdmin</span><span class=p>())</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=p>{</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=w>    </span><span class=nx>adminGroup</span><span class=p>.</span><span class=nx>GET</span><span class=p>(</span><span class=s>&quot;/users&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>userHandler</span><span class=p>.</span><span class=nx>ListUsers</span><span class=p>)</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=p>}</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a><span class=c1>// In handlers - conditional logic based on roles</span>
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a><span class=kd>func</span><span class=w> </span><span class=p>(</span><span class=nx>h</span><span class=w> </span><span class=o>*</span><span class=nx>Handler</span><span class=p>)</span><span class=w> </span><span class=nx>GetUser</span><span class=p>(</span><span class=nx>c</span><span class=w> </span><span class=o>*</span><span class=nx>gin</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>IsAdmin</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-11><a id=__codelineno-11-11 name=__codelineno-11-11 href=#__codelineno-11-11></a><span class=w>        </span><span class=c1>// Admins can see all fields</span>
</span><span id=__span-11-12><a id=__codelineno-11-12 name=__codelineno-11-12 href=#__codelineno-11-12></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=nx>fullUserProfile</span>
</span><span id=__span-11-13><a id=__codelineno-11-13 name=__codelineno-11-13 href=#__codelineno-11-13></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-11-14><a id=__codelineno-11-14 name=__codelineno-11-14 href=#__codelineno-11-14></a><span class=w>    </span><span class=c1>// Regular users see limited fields</span>
</span><span id=__span-11-15><a id=__codelineno-11-15 name=__codelineno-11-15 href=#__codelineno-11-15></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=nx>basicUserProfile</span>
</span><span id=__span-11-16><a id=__codelineno-11-16 name=__codelineno-11-16 href=#__codelineno-11-16></a><span class=p>}</span>
</span></code></pre></div> <p>See <a href=../RBAC/ >RBAC Guide</a> for complete role management documentation.</p> <h2 id=code-transformation>üîÑ Code Transformation<a class=headerlink href=#code-transformation title="Permanent link">&para;</a></h2> <h3 id=before-repetitive-boilerplate>Before: Repetitive Boilerplate<a class=headerlink href=#before-repetitive-boilerplate title="Permanent link">&para;</a></h3> <p>Every protected handler required verbose authentication code:</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=kd>func</span><span class=w> </span><span class=p>(</span><span class=nx>h</span><span class=w> </span><span class=o>*</span><span class=nx>Handler</span><span class=p>)</span><span class=w> </span><span class=nx>GetUser</span><span class=p>(</span><span class=nx>c</span><span class=w> </span><span class=o>*</span><span class=nx>gin</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=w>    </span><span class=c1>// Parse ID from URL</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=w>    </span><span class=nx>id</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>strconv</span><span class=p>.</span><span class=nx>ParseUint</span><span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>Param</span><span class=p>(</span><span class=s>&quot;id&quot;</span><span class=p>),</span><span class=w> </span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=mi>32</span><span class=p>)</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=w>        </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusBadRequest</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Invalid user ID&quot;</span><span class=p>})</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a><span class=w>        </span><span class=k>return</span>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a><span class=w>    </span><span class=c1>// Extract user claims manually</span>
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a><span class=w>    </span><span class=nx>claims</span><span class=p>,</span><span class=w> </span><span class=nx>exists</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>c</span><span class=p>.</span><span class=nx>Get</span><span class=p>(</span><span class=s>&quot;user&quot;</span><span class=p>)</span>
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>!</span><span class=nx>exists</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a><span class=w>        </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusUnauthorized</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Unauthorized&quot;</span><span class=p>})</span>
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a><span class=w>        </span><span class=k>return</span>
</span><span id=__span-12-14><a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-12-15><a id=__codelineno-12-15 name=__codelineno-12-15 href=#__codelineno-12-15></a><span class=w>    </span><span class=nx>userClaims</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>claims</span><span class=p>.(</span><span class=o>*</span><span class=nx>auth</span><span class=p>.</span><span class=nx>Claims</span><span class=p>)</span>
</span><span id=__span-12-16><a id=__codelineno-12-16 name=__codelineno-12-16 href=#__codelineno-12-16></a>
</span><span id=__span-12-17><a id=__codelineno-12-17 name=__codelineno-12-17 href=#__codelineno-12-17></a><span class=w>    </span><span class=c1>// Authorization check</span>
</span><span id=__span-12-18><a id=__codelineno-12-18 name=__codelineno-12-18 href=#__codelineno-12-18></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=nx>userClaims</span><span class=p>.</span><span class=nx>UserID</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=nb>uint</span><span class=p>(</span><span class=nx>id</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-19><a id=__codelineno-12-19 name=__codelineno-12-19 href=#__codelineno-12-19></a><span class=w>        </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusForbidden</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Forbidden&quot;</span><span class=p>})</span>
</span><span id=__span-12-20><a id=__codelineno-12-20 name=__codelineno-12-20 href=#__codelineno-12-20></a><span class=w>        </span><span class=k>return</span>
</span><span id=__span-12-21><a id=__codelineno-12-21 name=__codelineno-12-21 href=#__codelineno-12-21></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-12-22><a id=__codelineno-12-22 name=__codelineno-12-22 href=#__codelineno-12-22></a>
</span><span id=__span-12-23><a id=__codelineno-12-23 name=__codelineno-12-23 href=#__codelineno-12-23></a><span class=w>    </span><span class=c1>// Actual handler logic...</span>
</span><span id=__span-12-24><a id=__codelineno-12-24 name=__codelineno-12-24 href=#__codelineno-12-24></a><span class=p>}</span>
</span></code></pre></div> <h3 id=after-clean-type-safe>After: Clean &amp; Type-Safe<a class=headerlink href=#after-clean-type-safe title="Permanent link">&para;</a></h3> <p>With Context Helpers, the same functionality becomes clean and readable:</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=kd>func</span><span class=w> </span><span class=p>(</span><span class=nx>h</span><span class=w> </span><span class=o>*</span><span class=nx>Handler</span><span class=p>)</span><span class=w> </span><span class=nx>GetUser</span><span class=p>(</span><span class=nx>c</span><span class=w> </span><span class=o>*</span><span class=nx>gin</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=w>    </span><span class=c1>// Parse ID from URL</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=w>    </span><span class=nx>id</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>strconv</span><span class=p>.</span><span class=nx>ParseUint</span><span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>Param</span><span class=p>(</span><span class=s>&quot;id&quot;</span><span class=p>),</span><span class=w> </span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=mi>32</span><span class=p>)</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=w>        </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusBadRequest</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Invalid user ID&quot;</span><span class=p>})</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=w>        </span><span class=k>return</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a><span class=w>    </span><span class=c1>// Clean authorization check</span>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>!</span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>CanAccessUser</span><span class=p>(</span><span class=nx>c</span><span class=p>,</span><span class=w> </span><span class=nb>uint</span><span class=p>(</span><span class=nx>id</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a><span class=w>        </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusForbidden</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Forbidden&quot;</span><span class=p>})</span>
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a><span class=w>        </span><span class=k>return</span>
</span><span id=__span-13-13><a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-13-14><a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a>
</span><span id=__span-13-15><a id=__codelineno-13-15 name=__codelineno-13-15 href=#__codelineno-13-15></a><span class=w>    </span><span class=c1>// Actual handler logic...</span>
</span><span id=__span-13-16><a id=__codelineno-13-16 name=__codelineno-13-16 href=#__codelineno-13-16></a><span class=p>}</span>
</span></code></pre></div> <h2 id=impact-metrics>üìä Impact Metrics<a class=headerlink href=#impact-metrics title="Permanent link">&para;</a></h2> <table> <thead> <tr> <th>Metric</th> <th>Before</th> <th>After</th> <th>Improvement</th> </tr> </thead> <tbody> <tr> <td><strong>Lines per handler</strong></td> <td>5-6 lines</td> <td>1 line</td> <td><strong>83% reduction</strong></td> </tr> <tr> <td><strong>Type safety</strong></td> <td>Manual assertions</td> <td>Built-in</td> <td><strong>100% safe</strong></td> </tr> <tr> <td><strong>Test coverage</strong></td> <td>None</td> <td>25+ tests</td> <td><strong>Complete coverage</strong></td> </tr> <tr> <td><strong>Code duplication</strong></td> <td>High</td> <td>Eliminated</td> <td><strong>DRY principle</strong></td> </tr> </tbody> </table> <h2 id=usage-examples>üõ†Ô∏è Usage Examples<a class=headerlink href=#usage-examples title="Permanent link">&para;</a></h2> <h3 id=basic-authentication-check>Basic Authentication Check<a class=headerlink href=#basic-authentication-check title="Permanent link">&para;</a></h3> <div class="language-go highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=kd>func</span><span class=w> </span><span class=p>(</span><span class=nx>h</span><span class=w> </span><span class=o>*</span><span class=nx>Handler</span><span class=p>)</span><span class=w> </span><span class=nx>ProtectedEndpoint</span><span class=p>(</span><span class=nx>c</span><span class=w> </span><span class=o>*</span><span class=nx>gin</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>!</span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>IsAuthenticated</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>        </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusUnauthorized</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Authentication required&quot;</span><span class=p>})</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>        </span><span class=k>return</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=w>    </span><span class=nx>userID</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>GetUserID</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=w>    </span><span class=c1>// Use userID safely</span>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=p>}</span>
</span></code></pre></div> <h3 id=resource-ownership-validation>Resource Ownership Validation<a class=headerlink href=#resource-ownership-validation title="Permanent link">&para;</a></h3> <div class="language-go highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=kd>func</span><span class=w> </span><span class=p>(</span><span class=nx>h</span><span class=w> </span><span class=o>*</span><span class=nx>Handler</span><span class=p>)</span><span class=w> </span><span class=nx>UpdateUser</span><span class=p>(</span><span class=nx>c</span><span class=w> </span><span class=o>*</span><span class=nx>gin</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=w>    </span><span class=nx>id</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>strconv</span><span class=p>.</span><span class=nx>ParseUint</span><span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>Param</span><span class=p>(</span><span class=s>&quot;id&quot;</span><span class=p>),</span><span class=w> </span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=mi>32</span><span class=p>)</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>        </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusBadRequest</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Invalid user ID&quot;</span><span class=p>})</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=w>        </span><span class=k>return</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=w>    </span><span class=c1>// Check if user can access this resource</span>
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>!</span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>CanAccessUser</span><span class=p>(</span><span class=nx>c</span><span class=p>,</span><span class=w> </span><span class=nb>uint</span><span class=p>(</span><span class=nx>id</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a><span class=w>        </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusForbidden</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Access denied&quot;</span><span class=p>})</span>
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a><span class=w>        </span><span class=k>return</span>
</span><span id=__span-15-12><a id=__codelineno-15-12 name=__codelineno-15-12 href=#__codelineno-15-12></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-15-13><a id=__codelineno-15-13 name=__codelineno-15-13 href=#__codelineno-15-13></a>
</span><span id=__span-15-14><a id=__codelineno-15-14 name=__codelineno-15-14 href=#__codelineno-15-14></a><span class=w>    </span><span class=c1>// Proceed with update...</span>
</span><span id=__span-15-15><a id=__codelineno-15-15 name=__codelineno-15-15 href=#__codelineno-15-15></a><span class=p>}</span>
</span></code></pre></div> <h3 id=user-information-display>User Information Display<a class=headerlink href=#user-information-display title="Permanent link">&para;</a></h3> <div class="language-go highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=kd>func</span><span class=w> </span><span class=p>(</span><span class=nx>h</span><span class=w> </span><span class=o>*</span><span class=nx>Handler</span><span class=p>)</span><span class=w> </span><span class=nx>GetProfile</span><span class=p>(</span><span class=nx>c</span><span class=w> </span><span class=o>*</span><span class=nx>gin</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=w>    </span><span class=nx>user</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>GetUser</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=nx>user</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=w>        </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusUnauthorized</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Unauthorized&quot;</span><span class=p>})</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=w>        </span><span class=k>return</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=w>    </span><span class=nx>profile</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=w>        </span><span class=s>&quot;id&quot;</span><span class=p>:</span><span class=w>    </span><span class=nx>user</span><span class=p>.</span><span class=nx>UserID</span><span class=p>,</span>
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a><span class=w>        </span><span class=s>&quot;email&quot;</span><span class=p>:</span><span class=w> </span><span class=nx>user</span><span class=p>.</span><span class=nx>Email</span><span class=p>,</span>
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=w>        </span><span class=s>&quot;name&quot;</span><span class=p>:</span><span class=w>  </span><span class=nx>user</span><span class=p>.</span><span class=nx>Name</span><span class=p>,</span>
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a>
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a><span class=w>    </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusOK</span><span class=p>,</span><span class=w> </span><span class=nx>profile</span><span class=p>)</span>
</span><span id=__span-16-15><a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a><span class=p>}</span>
</span></code></pre></div> <h3 id=error-handling-with-must-functions>Error Handling with Must Functions<a class=headerlink href=#error-handling-with-must-functions title="Permanent link">&para;</a></h3> <div class="language-go highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=kd>func</span><span class=w> </span><span class=p>(</span><span class=nx>h</span><span class=w> </span><span class=o>*</span><span class=nx>Handler</span><span class=p>)</span><span class=w> </span><span class=nx>StrictEndpoint</span><span class=p>(</span><span class=nx>c</span><span class=w> </span><span class=o>*</span><span class=nx>gin</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=w>    </span><span class=nx>userID</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>MustGetUserID</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=w>        </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusUnauthorized</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Authentication required&quot;</span><span class=p>})</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a><span class=w>        </span><span class=k>return</span>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a><span class=w>    </span><span class=nx>email</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>MustGetUser</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span>
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a><span class=w>        </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusUnauthorized</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;User information missing&quot;</span><span class=p>})</span>
</span><span id=__span-17-11><a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a><span class=w>        </span><span class=k>return</span>
</span><span id=__span-17-12><a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-17-13><a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a>
</span><span id=__span-17-14><a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a><span class=w>    </span><span class=c1>// Use userID and email safely</span>
</span><span id=__span-17-15><a id=__codelineno-17-15 name=__codelineno-17-15 href=#__codelineno-17-15></a><span class=p>}</span>
</span></code></pre></div> <h2 id=testing>üß™ Testing<a class=headerlink href=#testing title="Permanent link">&para;</a></h2> <p>The Context Helpers package includes comprehensive test coverage with 25+ unit tests covering:</p> <ul> <li>‚úÖ <strong>Happy path scenarios</strong>: Valid user extraction</li> <li>‚úÖ <strong>Edge cases</strong>: Missing authentication, invalid types</li> <li>‚úÖ <strong>Error conditions</strong>: Malformed context data</li> <li>‚úÖ <strong>Authorization logic</strong>: Access control validation</li> <li>‚úÖ <strong>Type safety</strong>: Proper type assertions</li> </ul> <h3 id=running-tests>Running Tests<a class=headerlink href=#running-tests title="Permanent link">&para;</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=c1># Run all tests</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a>go<span class=w> </span><span class=nb>test</span><span class=w> </span>./tests/context_test.go<span class=w> </span>-v
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=c1># Run with coverage</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a>go<span class=w> </span><span class=nb>test</span><span class=w> </span>./tests/context_test.go<span class=w> </span>-v<span class=w> </span>-cover
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a><span class=c1># Run all project tests</span>
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a>make<span class=w> </span><span class=nb>test</span>
</span></code></pre></div> <h2 id=integration>üîß Integration<a class=headerlink href=#integration title="Permanent link">&para;</a></h2> <h3 id=prerequisites>Prerequisites<a class=headerlink href=#prerequisites title="Permanent link">&para;</a></h3> <p>The Context Helpers require:</p> <ol> <li><strong>JWT Authentication Middleware</strong>: Must be applied to protected routes</li> <li><strong>Auth Claims Structure</strong>: Compatible with <code>internal/auth.Claims</code></li> <li><strong>Context Key</strong>: Uses <code>auth.KeyUser</code> constant for context storage</li> </ol> <h3 id=middleware-setup>Middleware Setup<a class=headerlink href=#middleware-setup title="Permanent link">&para;</a></h3> <p>Ensure your routes are protected with the authentication middleware:</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=c1>// In your router setup</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=nx>authMiddleware</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>auth</span><span class=p>.</span><span class=nx>NewMiddleware</span><span class=p>(</span><span class=nx>authService</span><span class=p>)</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=nx>protected</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>router</span><span class=p>.</span><span class=nx>Group</span><span class=p>(</span><span class=s>&quot;/api/v1&quot;</span><span class=p>)</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=nx>protected</span><span class=p>.</span><span class=nx>Use</span><span class=p>(</span><span class=nx>authMiddleware</span><span class=p>)</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a>
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=c1>// Now handlers can use context helpers</span>
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a><span class=nx>protected</span><span class=p>.</span><span class=nx>GET</span><span class=p>(</span><span class=s>&quot;/users/:id&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>userHandler</span><span class=p>.</span><span class=nx>GetUser</span><span class=p>)</span>
</span></code></pre></div> <h2 id=best-practices>üöÄ Best Practices<a class=headerlink href=#best-practices title="Permanent link">&para;</a></h2> <h3 id=1-use-appropriate-functions>1. Use Appropriate Functions<a class=headerlink href=#1-use-appropriate-functions title="Permanent link">&para;</a></h3> <ul> <li><strong>Safe functions</strong> (<code>GetUserID</code>, <code>GetEmail</code>) for optional user info</li> <li><strong>Must functions</strong> (<code>MustGetUserID</code>, <code>MustGetUser</code>) when authentication is required</li> <li><strong>Boolean checks</strong> (<code>IsAuthenticated</code>, <code>CanAccessUser</code>) for conditional logic</li> </ul> <h3 id=2-consistent-error-handling>2. Consistent Error Handling<a class=headerlink href=#2-consistent-error-handling title="Permanent link">&para;</a></h3> <div class="language-go highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=c1>// Good: Consistent error responses</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a><span class=k>if</span><span class=w> </span><span class=p>!</span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>IsAuthenticated</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a><span class=w>    </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusUnauthorized</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Unauthorized&quot;</span><span class=p>})</span>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a><span class=w>    </span><span class=k>return</span>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a><span class=p>}</span>
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a>
</span><span id=__span-20-7><a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a><span class=c1>// Good: Use appropriate HTTP status codes</span>
</span><span id=__span-20-8><a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a><span class=k>if</span><span class=w> </span><span class=p>!</span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>CanAccessUser</span><span class=p>(</span><span class=nx>c</span><span class=p>,</span><span class=w> </span><span class=nx>targetID</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-20-9><a id=__codelineno-20-9 name=__codelineno-20-9 href=#__codelineno-20-9></a><span class=w>    </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusForbidden</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Forbidden&quot;</span><span class=p>})</span>
</span><span id=__span-20-10><a id=__codelineno-20-10 name=__codelineno-20-10 href=#__codelineno-20-10></a><span class=w>    </span><span class=k>return</span>
</span><span id=__span-20-11><a id=__codelineno-20-11 name=__codelineno-20-11 href=#__codelineno-20-11></a><span class=p>}</span>
</span></code></pre></div> <h3 id=3-combine-with-validation>3. Combine with Validation<a class=headerlink href=#3-combine-with-validation title="Permanent link">&para;</a></h3> <div class="language-go highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=kd>func</span><span class=w> </span><span class=p>(</span><span class=nx>h</span><span class=w> </span><span class=o>*</span><span class=nx>Handler</span><span class=p>)</span><span class=w> </span><span class=nx>UpdateUser</span><span class=p>(</span><span class=nx>c</span><span class=w> </span><span class=o>*</span><span class=nx>gin</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=w>    </span><span class=c1>// Input validation</span>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=w>    </span><span class=nx>id</span><span class=p>,</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>strconv</span><span class=p>.</span><span class=nx>ParseUint</span><span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>Param</span><span class=p>(</span><span class=s>&quot;id&quot;</span><span class=p>),</span><span class=w> </span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=mi>32</span><span class=p>)</span>
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a><span class=w>        </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusBadRequest</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Invalid user ID&quot;</span><span class=p>})</span>
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a><span class=w>        </span><span class=k>return</span>
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-21-8><a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a>
</span><span id=__span-21-9><a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a><span class=w>    </span><span class=c1>// Authentication &amp; authorization</span>
</span><span id=__span-21-10><a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>!</span><span class=nx>contextutil</span><span class=p>.</span><span class=nx>CanAccessUser</span><span class=p>(</span><span class=nx>c</span><span class=p>,</span><span class=w> </span><span class=nb>uint</span><span class=p>(</span><span class=nx>id</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-21-11><a id=__codelineno-21-11 name=__codelineno-21-11 href=#__codelineno-21-11></a><span class=w>        </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusForbidden</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Forbidden&quot;</span><span class=p>})</span>
</span><span id=__span-21-12><a id=__codelineno-21-12 name=__codelineno-21-12 href=#__codelineno-21-12></a><span class=w>        </span><span class=k>return</span>
</span><span id=__span-21-13><a id=__codelineno-21-13 name=__codelineno-21-13 href=#__codelineno-21-13></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-21-14><a id=__codelineno-21-14 name=__codelineno-21-14 href=#__codelineno-21-14></a>
</span><span id=__span-21-15><a id=__codelineno-21-15 name=__codelineno-21-15 href=#__codelineno-21-15></a><span class=w>    </span><span class=c1>// Business logic validation</span>
</span><span id=__span-21-16><a id=__codelineno-21-16 name=__codelineno-21-16 href=#__codelineno-21-16></a><span class=w>    </span><span class=kd>var</span><span class=w> </span><span class=nx>req</span><span class=w> </span><span class=nx>UpdateRequest</span>
</span><span id=__span-21-17><a id=__codelineno-21-17 name=__codelineno-21-17 href=#__codelineno-21-17></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>c</span><span class=p>.</span><span class=nx>ShouldBindJSON</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>req</span><span class=p>);</span><span class=w> </span><span class=nx>err</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-21-18><a id=__codelineno-21-18 name=__codelineno-21-18 href=#__codelineno-21-18></a><span class=w>        </span><span class=nx>c</span><span class=p>.</span><span class=nx>JSON</span><span class=p>(</span><span class=nx>http</span><span class=p>.</span><span class=nx>StatusBadRequest</span><span class=p>,</span><span class=w> </span><span class=nx>gin</span><span class=p>.</span><span class=nx>H</span><span class=p>{</span><span class=s>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=nx>err</span><span class=p>.</span><span class=nx>Error</span><span class=p>()})</span>
</span><span id=__span-21-19><a id=__codelineno-21-19 name=__codelineno-21-19 href=#__codelineno-21-19></a><span class=w>        </span><span class=k>return</span>
</span><span id=__span-21-20><a id=__codelineno-21-20 name=__codelineno-21-20 href=#__codelineno-21-20></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-21-21><a id=__codelineno-21-21 name=__codelineno-21-21 href=#__codelineno-21-21></a>
</span><span id=__span-21-22><a id=__codelineno-21-22 name=__codelineno-21-22 href=#__codelineno-21-22></a><span class=w>    </span><span class=c1>// Proceed with update...</span>
</span><span id=__span-21-23><a id=__codelineno-21-23 name=__codelineno-21-23 href=#__codelineno-21-23></a><span class=p>}</span>
</span></code></pre></div> <h2 id=future-enhancements>üîÆ Future Enhancements<a class=headerlink href=#future-enhancements title="Permanent link">&para;</a></h2> <p>The Context Helpers package is designed for extensibility:</p> <ul> <li><strong>Role-Based Access Control (RBAC)</strong>: ‚úÖ Fully implemented with <code>HasRole</code>, <code>IsAdmin</code>, and <code>GetRoles</code> functions</li> <li><strong>Permission System</strong>: Extensible for complex permission checks</li> <li><strong>Multi-tenant Support</strong>: Ready for tenant-based access control</li> <li><strong>Audit Logging</strong>: Easy integration with user context information</li> </ul> <h2 id=related-documentation>üìö Related Documentation<a class=headerlink href=#related-documentation title="Permanent link">&para;</a></h2> <ul> <li><a href=../auth/ >Authentication Guide</a> - JWT authentication setup</li> <li><a href=../middleware/ >Middleware Documentation</a> - Request processing pipeline</li> <li><a href=../testing/ >Testing Guide</a> - Comprehensive testing strategies</li> <li><a href=../swagger/ >API Documentation</a> - Complete API reference</li> </ul> <hr> <p>The Context Helpers package transforms authentication code from repetitive boilerplate into clean, maintainable, and testable functions. By eliminating code duplication and providing type-safe user extraction, it significantly improves developer experience and code quality.</p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../PROJECT_SUMMARY/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Project Summary"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Project Summary </div> </div> </a> <a href=../MIGRATIONS_GUIDE/ class="md-footer__link md-footer__link--next" aria-label="Next: Migrations Guide"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Migrations Guide </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2025 vahiiiid - MIT License </div> </div> <div class=md-social> <a href=https://github.com/vahiiiid/go-rest-api-boilerplate target=_blank rel=noopener title="Main Repository" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://github.com/vahiiiid/go-rest-api-docs target=_blank rel=noopener title="Documentation Repository" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.top", "navigation.footer", "navigation.indexes", "toc.follow", "toc.integrate", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.code.annotate", "content.action.edit", "content.tabs.link"], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script> <script src=../assets/javascripts/bundle.e71a0d61.min.js></script> </body> </html>